# ===============================================================
# Image (OBLIGATOIRE – corrige ton erreur Helm)
# ===============================================================
image:
  repository: ghcr.io/srsran/srsran-gnb
  tag: latest
  pullPolicy: IfNotPresent

# ===============================================================
# gNB Pod IP (OBLIGATOIRE – utilisé par Multus n3network)
# ===============================================================
gnbIp: 10.10.3.231

# ===============================================================
# Start options
# ===============================================================
start:
  gnb: true
  logs: true

# ===============================================================
# Resources (désactivé pour éviter erreurs tcpdump)
# ===============================================================
resources:
  define: false

# ===============================================================
# gNB Configuration (montée dans /srsran/config/srsran-gnb.yaml)
# ===============================================================
gnbConfig:

  # -------------------------------
  # Identity
  # -------------------------------
  gnb_id: 411
  gnb_id_bit_length: 32
  ran_node_name: srsgnb01

  # -------------------------------
  # Remote control (REQUIRED by chart)
  # -------------------------------
  remote_control:
    enabled: false
    port: 9090

  # -------------------------------
  # AMF connection
  # -------------------------------
  amf:
    addr: 10.10.3.200
    port: 38412
    bind_addr: 10.10.3.231

  # -------------------------------
  # Network slicing
  # -------------------------------
  slicing:
    - sst: 1
    - sst: 1
      sd: 2

  # -------------------------------
  # Radio Unit – USRP N300
  # -------------------------------
  ru_sdr:
    device_driver: uhd
    device_args: addr=192.168.235.104
    srate: 61.44
    tx_gain: 28
    rx_gain: 35
    freq_offset: 0
    clock: internal
    sync: internal

  # -------------------------------
  # Cell configuration (FR1 – n78 – 20 MHz)
  # -------------------------------
  cell_cfg:
    pci: 0
    dl_arfcn: 640000
    band: 78
    common_scs: 30
    channel_bandwidth_MHz: 20
    plmn: "00101"
    tac: 1

    nof_antennas_dl: 1
    nof_antennas_ul: 1

    # ---------------------------
    # PDCCH
    # ---------------------------
    pdcch:
      common:
        ss0_index: 0
        coreset0_index: 12
      dedicated:
        ss2_type: common
        dci_format_0_1_and_1_1: 0

    # ---------------------------
    # PRACH
    # ---------------------------
    prach:
      prach_config_index: 1

    # ---------------------------
    # Downlink / Uplink
    # ---------------------------
    pdsch:
      mcs_table: qam64

    pusch:
      mcs_table: qam64

    # ---------------------------
    # SSB
    # ---------------------------
    ssb:
      ssb_period: 10
